module.exports=[54161,a=>{"use strict";var b=a.i(87924),c=a.i(187),d=a.i(76306),e=a.i(97895);let f=(0,c.cva)("inline-flex items-center justify-center rounded-full border border-transparent px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border-border text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",ghost:"[a&]:hover:bg-accent [a&]:hover:text-accent-foreground",link:"text-primary underline-offset-4 [a&]:hover:underline"}},defaultVariants:{variant:"default"}});function g({className:a,variant:c="default",asChild:g=!1,...h}){let i=g?d.Slot.Root:"span";return(0,b.jsx)(i,{"data-slot":"badge","data-variant":c,className:(0,e.cn)(f({variant:c}),a),...h})}a.s(["Badge",()=>g])},45311,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(3130),e=a.i(54161),f=a.i(40695),g=a.i(5522),h=a.i(65733),i=a.i(88237);function j(){let[a,j]=(0,c.useState)([]),[k,l]=(0,c.useState)(!1),[m,n]=(0,c.useState)(null),[o,p]=(0,c.useState)(""),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),[A,B]=(0,c.useState)(null),[C,D]=(0,c.useState)(null),[E,F]=(0,c.useState)(""),[G,H]=(0,c.useState)(""),[I,J]=(0,c.useState)("0"),[K,L]=(0,c.useState)("0");async function M(a){l(!0),n(null);try{let b=a?`/api/inventory?q=${encodeURIComponent(a)}`:"/api/inventory",c=await fetch(b,{cache:"no-store"}),d=await c.json().catch(()=>null);if(!c.ok)throw Error(d?.error??"Failed to load inventory");j(Array.isArray(d)?d:[])}catch(a){n(a?.message??"Failed to load inventory")}finally{l(!1)}}(0,c.useEffect)(()=>{M()},[]);let N=(0,c.useMemo)(()=>a=>a.quantity<=a.reorderLevel?"Low":"OK",[]);async function O(){n(null);let a={sku:E.trim(),name:G.trim(),quantity:Number(I),reorderLevel:Number(K)};try{let b=await fetch(u?`/api/inventory/${u.id}`:"/api/inventory",{method:u?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),c=await b.json().catch(()=>null);if(!b.ok)throw Error(c?.message??c?.error??"Save failed");t(!1),await M(q||void 0)}catch(a){n(a?.message??"Save failed")}}async function P(a){n(null);try{let b=await fetch(`/api/inventory/${a.id}`,{method:"DELETE"}),c=await b.json().catch(()=>null);if(!b.ok)throw Error(c?.message??c?.error??"Delete failed");await M(q||void 0)}catch(a){n(a?.message??"Delete failed")}}async function Q(){r(o.trim()),await M(o.trim()||void 0)}async function R(){z(!0),B(null);try{let a=await fetch("/api/inventory/report",{cache:"no-store"}),b=await a.json().catch(()=>null);if(!a.ok)throw Error(b?.message??b?.error??"Report failed");D(b)}catch(a){B(a?.message??"Report failed"),D(null)}finally{z(!1)}}async function S(){n(null);try{let a=await fetch("/api/inventory/report",{cache:"no-store"}),b=await a.json().catch(()=>null);if(!a.ok)throw Error(b?.message??b?.error??"Report failed");let c=Array.isArray(b?.rows)?b.rows:[],d=["id","name","sku","quantity","reorderLevel","updatedAt"],e=d.join(",")+"\n"+c.map(a=>d.map(b=>{var c;let d;return c=a?.[b],(d=String(c??"")).includes(",")||d.includes('"')||d.includes("\n")?`"${d.replaceAll('"','""')}"`:d}).join(",")).join("\n"),f=new Blob([e],{type:"text/csv;charset=utf-8"}),g=URL.createObjectURL(f),h=document.createElement("a");h.href=g,h.download=`inventory-report-${new Date().toISOString().slice(0,10)}.csv`,h.click(),URL.revokeObjectURL(g)}catch(a){n(a?.message??"Export failed")}}return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Inventory"}),k&&(0,b.jsx)("p",{className:"text-sm text-white/60",children:"Loading…"}),m&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:m})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)(h.Dialog,{open:s,onOpenChange:t,children:[(0,b.jsx)(h.DialogTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{className:"bg-white text-black hover:bg-white/90",onClick:function(){v(null),F(""),H(""),J("0"),L("0"),t(!0)},children:"Add Item"})}),(0,b.jsxs)(h.DialogContent,{className:"bg-zinc-950 text-white border-white/10",children:[(0,b.jsx)(h.DialogHeader,{children:(0,b.jsx)(h.DialogTitle,{children:u?"Edit Inventory Item":"Add Inventory Item"})}),(0,b.jsxs)("div",{className:"grid gap-3",children:[(0,b.jsx)(g.Input,{value:E,onChange:a=>F(a.target.value),placeholder:"SKU",className:"bg-white/5 border-white/10"}),(0,b.jsx)(g.Input,{value:G,onChange:a=>H(a.target.value),placeholder:"Name",className:"bg-white/5 border-white/10"}),(0,b.jsx)(g.Input,{value:I,onChange:a=>J(a.target.value),placeholder:"Quantity",inputMode:"numeric",className:"bg-white/5 border-white/10"}),(0,b.jsx)(g.Input,{value:K,onChange:a=>L(a.target.value),placeholder:"Reorder Level",inputMode:"numeric",className:"bg-white/5 border-white/10"}),(0,b.jsxs)("div",{className:"flex justify-end gap-2 pt-2",children:[(0,b.jsx)(f.Button,{variant:"secondary",className:"bg-white/10 text-white hover:bg-white/15",onClick:()=>t(!1),children:"Cancel"}),(0,b.jsx)(f.Button,{className:"bg-white text-black hover:bg-white/90",onClick:O,children:"Save"})]})]})]})]}),(0,b.jsxs)(h.Dialog,{open:w,onOpenChange:a=>{x(a),a&&R()},children:[(0,b.jsx)(h.DialogTrigger,{asChild:!0,children:(0,b.jsx)(f.Button,{variant:"secondary",className:"bg-white/10 text-white hover:bg-white/15",children:"Generate Report"})}),(0,b.jsxs)(h.DialogContent,{className:"bg-zinc-950 text-white border-white/10 max-w-3xl",children:[(0,b.jsx)(h.DialogHeader,{children:(0,b.jsx)(h.DialogTitle,{children:"Inventory Report"})}),y&&(0,b.jsx)("p",{className:"text-sm text-white/60",children:"Generating…"}),A&&(0,b.jsx)("p",{className:"text-sm text-red-500",children:A}),C&&(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"text-sm",children:[(0,b.jsx)("p",{className:"font-medium",children:C.title}),(0,b.jsxs)("p",{className:"text-white/60",children:["Generated: ",new Date(C.generatedAt).toLocaleString()]})]}),(0,b.jsx)("div",{className:"max-h-[45vh] overflow-auto rounded-lg border border-white/10",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{children:[(0,b.jsx)(i.TableHead,{className:"text-white/70",children:"SKU"}),(0,b.jsx)(i.TableHead,{className:"text-white/70",children:"Name"}),(0,b.jsx)(i.TableHead,{className:"text-white/70",children:"Qty"}),(0,b.jsx)(i.TableHead,{className:"text-white/70",children:"Reorder"}),(0,b.jsx)(i.TableHead,{className:"text-white/70",children:"Updated"})]})}),(0,b.jsx)(i.TableBody,{children:C.rows.map(a=>(0,b.jsxs)(i.TableRow,{className:"border-white/10",children:[(0,b.jsx)(i.TableCell,{className:"text-white/90",children:a.sku}),(0,b.jsx)(i.TableCell,{className:"text-white/90",children:a.name}),(0,b.jsx)(i.TableCell,{className:"text-white/90",children:a.quantity}),(0,b.jsx)(i.TableCell,{className:"text-white/90",children:a.reorderLevel}),(0,b.jsx)(i.TableCell,{className:"text-white/80",children:a.updatedAt?new Date(a.updatedAt).toLocaleString():""})]},a.id))})]})}),(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(f.Button,{variant:"secondary",className:"bg-white/10 text-white hover:bg-white/15",onClick:S,children:"Download CSV"}),(0,b.jsx)(f.Button,{className:"bg-white text-black hover:bg-white/90",onClick:()=>x(!1),children:"Close"})]})]})]})]})]})]}),(0,b.jsxs)(d.Card,{className:"bg-white/5 border-white/10",children:[(0,b.jsxs)(d.CardHeader,{className:"space-y-3",children:[(0,b.jsx)(d.CardTitle,{className:"text-base",children:"Items"}),(0,b.jsxs)("div",{className:"flex flex-col gap-2 sm:flex-row",children:[(0,b.jsx)(g.Input,{value:o,onChange:a=>p(a.target.value),placeholder:"Search by name, SKU…",className:"bg-white/5 border-white/10 text-white"}),(0,b.jsx)(f.Button,{onClick:Q,className:"bg-white text-black hover:bg-white/90",children:"Search"})]})]}),(0,b.jsx)(d.CardContent,{className:"overflow-auto",children:(0,b.jsxs)(i.Table,{children:[(0,b.jsx)(i.TableHeader,{children:(0,b.jsxs)(i.TableRow,{className:"border-white/10",children:[(0,b.jsx)(i.TableHead,{className:"text-white/70",children:"SKU"}),(0,b.jsx)(i.TableHead,{className:"text-white/70",children:"Name"}),(0,b.jsx)(i.TableHead,{className:"text-white/70",children:"Qty"}),(0,b.jsx)(i.TableHead,{className:"text-white/70",children:"Reorder"}),(0,b.jsx)(i.TableHead,{className:"text-white/70",children:"Status"}),(0,b.jsx)(i.TableHead,{className:"text-right text-white/70",children:"Actions"})]})}),(0,b.jsxs)(i.TableBody,{children:[a.map(a=>{let c=N(a);return(0,b.jsxs)(i.TableRow,{className:"border-white/10",children:[(0,b.jsx)(i.TableCell,{className:"text-white/90",children:a.sku}),(0,b.jsx)(i.TableCell,{className:"text-white/90",children:a.name}),(0,b.jsx)(i.TableCell,{className:"text-white/90",children:a.quantity}),(0,b.jsx)(i.TableCell,{className:"text-white/90",children:a.reorderLevel}),(0,b.jsx)(i.TableCell,{children:(0,b.jsx)(e.Badge,{variant:"secondary",className:["border","Low"===c?"bg-red-500/10 text-red-300 border-red-500/20":"bg-white/10 text-white/80 border-white/10"].join(" "),children:c})}),(0,b.jsx)(i.TableCell,{className:"text-right",children:(0,b.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,b.jsx)(f.Button,{size:"sm",variant:"secondary",className:"bg-white/10 text-white hover:bg-white/15",onClick:()=>{v(a),F(a.sku??""),H(a.name??""),J(String(a.quantity??0)),L(String(a.reorderLevel??0)),t(!0)},children:"Edit"}),(0,b.jsx)(f.Button,{size:"sm",variant:"destructive",className:"bg-red-600/80 hover:bg-red-600",onClick:()=>P(a),children:"Delete"})]})})]},a.id)}),!k&&0===a.length&&(0,b.jsx)(i.TableRow,{className:"border-white/10",children:(0,b.jsx)(i.TableCell,{colSpan:6,className:"text-center text-white/60 py-10",children:"No items found."})})]})]})})]})]})}a.s(["default",()=>j])}];

//# sourceMappingURL=_fe4d6d10._.js.map