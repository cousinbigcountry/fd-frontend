{"version":3,"sources":["../../../../app/%28portal%29/crm/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\r\nimport { Button } from \"@/components/ui/button\";\r\nimport { Input } from \"@/components/ui/input\";\r\nimport {\r\n    Dialog,\r\n    DialogContent,\r\n    DialogHeader,\r\n    DialogTitle,\r\n    DialogTrigger,\r\n} from \"@/components/ui/dialog\";\r\nimport {\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableHead,\r\n    TableHeader,\r\n    TableRow,\r\n} from \"@/components/ui/table\";\r\n\r\ntype PersonResponse = {\r\n    id: number;\r\n    type: string; // CLIENT | EMPLOYEE\r\n    code: string | null;\r\n    firstName: string;\r\n    lastName: string;\r\n    email: string;\r\n};\r\n\r\ntype PersonReportRow = {\r\n    id: number;\r\n    type: string;\r\n    code: string | null;\r\n    firstName: string;\r\n    lastName: string;\r\n    email: string;\r\n    roleOrCompany: string | null;\r\n};\r\n\r\ntype ReportResponse<T> = {\r\n    title: string;\r\n    generatedAt: string;\r\n    rows: T[];\r\n};\r\n\r\nexport default function CrmPage() {\r\n    const [people, setPeople] = useState<PersonResponse[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [err, setErr] = useState<string | null>(null);\r\n\r\n    const [q, setQ] = useState(\"\");\r\n\r\n    const [open, setOpen] = useState(false);\r\n    const [editing, setEditing] = useState<PersonResponse | null>(null);\r\n\r\n    // form state\r\n    const [firstName, setFirstName] = useState(\"\");\r\n    const [lastName, setLastName] = useState(\"\");\r\n    const [email, setEmail] = useState(\"\");\r\n    const [companyName, setCompanyName] = useState(\"\");\r\n    const [formErr, setFormErr] = useState<string | null>(null);\r\n\r\n    // report dialog\r\n    const [reportOpen, setReportOpen] = useState(false);\r\n    const [reportLoading, setReportLoading] = useState(false);\r\n    const [reportErr, setReportErr] = useState<string | null>(null);\r\n    const [report, setReport] = useState<ReportResponse<PersonReportRow> | null>(null);\r\n\r\n    const clients = useMemo(() => people.filter((p) => p.type === \"CLIENT\"), [people]);\r\n\r\n    async function loadPeople(query?: string) {\r\n        setLoading(true);\r\n        setErr(null);\r\n        try {\r\n            const url = query ? `/api/people?q=${encodeURIComponent(query)}` : \"/api/people\";\r\n            const res = await fetch(url, { cache: \"no-store\" });\r\n            const data = await res.json().catch(() => null);\r\n            if (!res.ok) throw new Error(data?.message ?? data?.error ?? \"Failed to load CRM\");\r\n            setPeople(Array.isArray(data) ? data : []);\r\n        } catch (e: any) {\r\n            setErr(e?.message ?? \"Failed to load CRM\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        loadPeople();\r\n    }, []);\r\n\r\n    function resetForm() {\r\n        setFirstName(\"\");\r\n        setLastName(\"\");\r\n        setEmail(\"\");\r\n        setCompanyName(\"\");\r\n        setFormErr(null);\r\n    }\r\n\r\n    async function hydrateCompanyNameFromReport(personId: number) {\r\n        try {\r\n            const res = await fetch(\"/api/people/report\", { cache: \"no-store\" });\r\n            const data = await res.json().catch(() => null);\r\n            if (!res.ok) return;\r\n            const rows: PersonReportRow[] = Array.isArray(data?.rows) ? data.rows : [];\r\n            const row = rows.find((r) => r.id === personId && r.type === \"CLIENT\");\r\n            if (row?.roleOrCompany) setCompanyName(row.roleOrCompany);\r\n        } catch {\r\n            // ignore\r\n        }\r\n    }\r\n\r\n    function openAdd() {\r\n        setEditing(null);\r\n        resetForm();\r\n        setOpen(true);\r\n    }\r\n\r\n    async function openEdit(p: PersonResponse) {\r\n        setEditing(p);\r\n        setFirstName(p.firstName ?? \"\");\r\n        setLastName(p.lastName ?? \"\");\r\n        setEmail(p.email ?? \"\");\r\n        setCompanyName(\"\");\r\n        setFormErr(null);\r\n        setOpen(true);\r\n\r\n        await hydrateCompanyNameFromReport(p.id);\r\n    }\r\n\r\n    async function save() {\r\n        setFormErr(null);\r\n\r\n        if (!firstName.trim() || !lastName.trim() || !email.trim() || !companyName.trim()) {\r\n            setFormErr(\"First name, last name, email, and company name are required.\");\r\n            return;\r\n        }\r\n\r\n        const payload = {\r\n            firstName: firstName.trim(),\r\n            lastName: lastName.trim(),\r\n            email: email.trim(),\r\n            companyName: companyName.trim(),\r\n            department: \"CLIENT\",\r\n        };\r\n\r\n        try {\r\n            const res = await fetch(\r\n                editing ? `/api/people/clients/${editing.id}` : \"/api/people/clients\",\r\n                {\r\n                    method: editing ? \"PUT\" : \"POST\",\r\n                    headers: { \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify(payload),\r\n                }\r\n            );\r\n\r\n            const data = await res.json().catch(() => null);\r\n            if (!res.ok) throw new Error(data?.message ?? data?.error ?? \"Save failed\");\r\n\r\n            setOpen(false);\r\n            await loadPeople(q.trim() || undefined);\r\n        } catch (e: any) {\r\n            setFormErr(e?.message ?? \"Save failed\");\r\n        }\r\n    }\r\n\r\n    async function del(p: PersonResponse) {\r\n        setErr(null);\r\n        try {\r\n            const res = await fetch(`/api/people/${p.id}`, { method: \"DELETE\" });\r\n            const data = await res.json().catch(() => null);\r\n            if (!res.ok) throw new Error(data?.message ?? data?.error ?? \"Delete failed\");\r\n            await loadPeople(q.trim() || undefined);\r\n        } catch (e: any) {\r\n            setErr(e?.message ?? \"Delete failed\");\r\n        }\r\n    }\r\n\r\n    async function runSearch() {\r\n        await loadPeople(q.trim() || undefined);\r\n    }\r\n\r\n    async function loadReport() {\r\n        setReportLoading(true);\r\n        setReportErr(null);\r\n        try {\r\n            const res = await fetch(\"/api/people/report\", { cache: \"no-store\" });\r\n            const data = await res.json().catch(() => null);\r\n            if (!res.ok) throw new Error(data?.message ?? data?.error ?? \"Report failed\");\r\n            setReport(data);\r\n        } catch (e: any) {\r\n            setReportErr(e?.message ?? \"Report failed\");\r\n            setReport(null);\r\n        } finally {\r\n            setReportLoading(false);\r\n        }\r\n    }\r\n\r\n    const reportClientRows = useMemo(() => {\r\n        const rows = report?.rows ?? [];\r\n        return rows.filter((r) => r.type === \"CLIENT\");\r\n    }, [report]);\r\n\r\n    return (\r\n        <div className=\"space-y-6\">\r\n            <div className=\"flex flex-col gap-2 sm:flex-row sm:items-end sm:justify-between\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-semibold tracking-tight\">CRM</h1>\r\n                    {loading && <p className=\"text-sm text-white/60\">Loading…</p>}\r\n                    {err && <p className=\"text-sm text-red-500\">{err}</p>}\r\n                </div>\r\n\r\n                <div className=\"flex gap-2\">\r\n                    <Dialog open={open} onOpenChange={setOpen}>\r\n                        <DialogTrigger asChild>\r\n                            <Button className=\"bg-white text-black hover:bg-white/90\" onClick={openAdd}>\r\n                                Add Client\r\n                            </Button>\r\n                        </DialogTrigger>\r\n\r\n                        <DialogContent className=\"bg-zinc-950 text-white border-white/10\">\r\n                            <DialogHeader>\r\n                                <DialogTitle>{editing ? \"Edit Client\" : \"Add Client\"}</DialogTitle>\r\n                            </DialogHeader>\r\n\r\n                            <div className=\"grid gap-3\">\r\n                                <Input value={firstName} onChange={(e) => setFirstName(e.target.value)} placeholder=\"First name\" className=\"bg-white/5 border-white/10\" />\r\n                                <Input value={lastName} onChange={(e) => setLastName(e.target.value)} placeholder=\"Last name\" className=\"bg-white/5 border-white/10\" />\r\n                                <Input value={email} onChange={(e) => setEmail(e.target.value)} placeholder=\"Email\" className=\"bg-white/5 border-white/10\" />\r\n                                <Input value={companyName} onChange={(e) => setCompanyName(e.target.value)} placeholder=\"Company name\" className=\"bg-white/5 border-white/10\" />\r\n\r\n                                {formErr && <p className=\"text-sm text-red-500\">{formErr}</p>}\r\n\r\n                                <div className=\"flex justify-end gap-2 pt-2\">\r\n                                    <Button variant=\"secondary\" className=\"bg-white/10 text-white hover:bg-white/15\" onClick={() => setOpen(false)}>\r\n                                        Cancel\r\n                                    </Button>\r\n                                    <Button className=\"bg-white text-black hover:bg-white/90\" onClick={save}>\r\n                                        Save\r\n                                    </Button>\r\n                                </div>\r\n                            </div>\r\n                        </DialogContent>\r\n                    </Dialog>\r\n\r\n                    <Dialog\r\n                        open={reportOpen}\r\n                        onOpenChange={(v) => {\r\n                            setReportOpen(v);\r\n                            if (v) loadReport();\r\n                        }}\r\n                    >\r\n                        <DialogTrigger asChild>\r\n                            <Button variant=\"secondary\" className=\"bg-white/10 text-white hover:bg-white/15\">\r\n                                Generate Report\r\n                            </Button>\r\n                        </DialogTrigger>\r\n\r\n                        <DialogContent className=\"bg-zinc-950 text-white border-white/10 max-w-3xl\">\r\n                            <DialogHeader>\r\n                                <DialogTitle>CRM Report</DialogTitle>\r\n                            </DialogHeader>\r\n\r\n                            {reportLoading && <p className=\"text-sm text-white/60\">Generating…</p>}\r\n                            {reportErr && <p className=\"text-sm text-red-500\">{reportErr}</p>}\r\n\r\n                            {report && (\r\n                                <div className=\"space-y-3\">\r\n                                    <div className=\"text-sm\">\r\n                                        <p className=\"font-medium\">{report.title}</p>\r\n                                        <p className=\"text-white/60\">Generated: {new Date(report.generatedAt).toLocaleString()}</p>\r\n                                    </div>\r\n\r\n                                    <div className=\"max-h-[45vh] overflow-auto rounded-lg border border-white/10\">\r\n                                        <Table>\r\n                                            <TableHeader>\r\n                                                <TableRow>\r\n                                                    <TableHead className=\"text-white/70\">Code</TableHead>\r\n                                                    <TableHead className=\"text-white/70\">Name</TableHead>\r\n                                                    <TableHead className=\"text-white/70\">Email</TableHead>\r\n                                                    <TableHead className=\"text-white/70\">Company</TableHead>\r\n                                                </TableRow>\r\n                                            </TableHeader>\r\n                                            <TableBody>\r\n                                                {reportClientRows.map((r) => (\r\n                                                    <TableRow key={r.id} className=\"border-white/10\">\r\n                                                        <TableCell className=\"text-white/90\">{r.code ?? \"\"}</TableCell>\r\n                                                        <TableCell className=\"text-white/90\">{r.firstName} {r.lastName}</TableCell>\r\n                                                        <TableCell className=\"text-white/90\">{r.email}</TableCell>\r\n                                                        <TableCell className=\"text-white/90\">{r.roleOrCompany ?? \"\"}</TableCell>\r\n                                                    </TableRow>\r\n                                                ))}\r\n                                                {reportClientRows.length === 0 && (\r\n                                                    <TableRow className=\"border-white/10\">\r\n                                                        <TableCell colSpan={4} className=\"text-center text-white/60 py-10\">\r\n                                                            No clients found.\r\n                                                        </TableCell>\r\n                                                    </TableRow>\r\n                                                )}\r\n                                            </TableBody>\r\n                                        </Table>\r\n                                    </div>\r\n\r\n                                    <div className=\"flex justify-end\">\r\n                                        <Button className=\"bg-white text-black hover:bg-white/90\" onClick={() => setReportOpen(false)}>\r\n                                            Close\r\n                                        </Button>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </DialogContent>\r\n                    </Dialog>\r\n                </div>\r\n            </div>\r\n\r\n            <Card className=\"bg-white/5 border-white/10\">\r\n                <CardHeader className=\"space-y-3\">\r\n                    <CardTitle className=\"text-base\">Clients</CardTitle>\r\n\r\n                    <div className=\"flex flex-col gap-2 sm:flex-row\">\r\n                        <Input value={q} onChange={(e) => setQ(e.target.value)} placeholder=\"Search by last name or email…\" className=\"bg-white/5 border-white/10 text-white\" />\r\n                        <Button onClick={runSearch} className=\"bg-white text-black hover:bg-white/90\">\r\n                            Search\r\n                        </Button>\r\n                    </div>\r\n                </CardHeader>\r\n\r\n                <CardContent className=\"overflow-auto\">\r\n                    <Table>\r\n                        <TableHeader>\r\n                            <TableRow className=\"border-white/10\">\r\n                                <TableHead className=\"text-white/70\">Code</TableHead>\r\n                                <TableHead className=\"text-white/70\">Name</TableHead>\r\n                                <TableHead className=\"text-white/70\">Email</TableHead>\r\n                                <TableHead className=\"text-right text-white/70\">Actions</TableHead>\r\n                            </TableRow>\r\n                        </TableHeader>\r\n                        <TableBody>\r\n                            {clients.map((c) => (\r\n                                <TableRow key={c.id} className=\"border-white/10\">\r\n                                    <TableCell className=\"text-white/90\">{c.code ?? \"\"}</TableCell>\r\n                                    <TableCell className=\"text-white/90\">{c.firstName} {c.lastName}</TableCell>\r\n                                    <TableCell className=\"text-white/90\">{c.email}</TableCell>\r\n                                    <TableCell className=\"text-right\">\r\n                                        <div className=\"flex justify-end gap-2\">\r\n                                            <Button size=\"sm\" variant=\"secondary\" className=\"bg-white/10 text-white hover:bg-white/15\" onClick={() => openEdit(c)}>\r\n                                                Edit\r\n                                            </Button>\r\n                                            <Button size=\"sm\" variant=\"destructive\" className=\"bg-red-600/80 hover:bg-red-600\" onClick={() => del(c)}>\r\n                                                Delete\r\n                                            </Button>\r\n                                        </div>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n\r\n                            {!loading && clients.length === 0 && (\r\n                                <TableRow className=\"border-white/10\">\r\n                                    <TableCell colSpan={4} className=\"text-center text-white/60 py-10\">\r\n                                        No clients found.\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            )}\r\n                        </TableBody>\r\n                    </Table>\r\n                </CardContent>\r\n            </Card>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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"}